{% extends 'base1.html.twig' %}

{% block title %}Contrôle à distance des équipements{% endblock %}

{# {% block bootstrap %}
<link href="/css/bootstrap-custom.css" rel="stylesheet">
{% endblock	%} #}

{% block stylesheets %}
	<link href="/css/iot-theme.css" rel="stylesheet" type="text/css">
	<link href="/css/scrollspyNav.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/plugins/bootstrap-select/bootstrap-select.min.css">
	<link href="/plugins/animate/animate.css" rel="stylesheet" type="text/css">
	<script src="/plugins/sweetalerts/promise-polyfill.js"></script>
	<link href="/plugins/sweetalerts/sweetalert2.min.css" rel="stylesheet" type="text/css">
	<link href="/plugins/sweetalerts/sweetalert.css" rel="stylesheet" type="text/css">
	<link href="/css/components/custom-sweetalert.css" rel="stylesheet" type="text/css">
	<link href="/css/components/tabs-accordian/custom-tabs.css" rel="stylesheet" type="text/css">
	<link href="/css/components/custom-modal.css" rel="stylesheet" type="text/css" />
    <link href="plugins/loaders/custom-loader.css" rel="stylesheet" type="text/css" />
    
	<!-- Sweet Alert -->
	<link href="/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet" type="text/css">
	<link href="/css/apps/todolist.css" rel="stylesheet" type="text/css" />
{% endblock %}
                                   
{% block loader %}
<!-- Preloader START -->
<div id="iot-preloader">
	<div class="center-preloader d-flex align-items-center">
		<div class="spinners">
			<div class="spinner01"></div>
			<div class="spinner02"></div>
		</div>
	</div>
</div>
<!-- Preloader END -->
{% endblock %}

{% block body %}
	<div class="d-none">
		<input type="hidden" value={{smartHome.cleverbox.id}} id="bx">
	</div>
	<div class="border-top-tab">
		<ul class="nav nav-tabs mb-3 mt-3 justify-content-center" id="borderTop" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="control-tab" data-toggle="tab" href="#control" role="tab" aria-controls="control" aria-selected="true">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-toggle-right"><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle></svg>
				<small>Contrôle</small></a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="programming-tab" data-toggle="tab" href="#programming" role="tab" aria-controls="programming" aria-selected="false">
				{# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> #}
				<i class="fa fa-clock"></i>
				<small>Programmation</small></a>
			</li>
		</ul>

		<div class="tab-content" id="borderTopContent">
        	<div class="tab-pane fade show active" id="control" role="tabpanel" aria-labelledby="control-tab">
				<div class="row">
					{# {{dump(devicesNb)}} #}
					{# {{dump(smartHome.NumberOfEachDevice.NbLightInt)}} #}
					{% if smartHome.NumberOfEachDevice.NbLightInt > 0 %}		 
					<div class="col-sm-12 col-md-6 col-xl-4">
						<!-- Interior lights  START -->
						<div class="card" data-unit-group="switch-lights-in">
							<div class="card-body">
								<h4 class="card-title">Luminaires - intérieur</h4>
							</div>
							<ul class="list-group list-group-flush">
								{% for lightInt in smartHome.devices.LightInt %}
									<li class="list-group-item d-flex" data-unit="switch-light-{{lightInt.moduleId}}">
										<svg class="icon-sprite">
											<use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
											<use xlink:href="/img/icons-sprite.svg#bulb-eco"/>
										</svg>
										<h5>{{lightInt.name}}</h5>
										<div class=""><canvas id="led-{{lightInt.moduleId}}" data-entry-led="switch-light-{{lightInt.moduleId}}" data-entry-ledid="led-{{lightInt.moduleId}}" width="30" height="30"></canvas></div>
                                        
                                        <label class="switch ml-auto">
											<input type="checkbox" id="switch-light-{{lightInt.moduleId}}">
										</label>
										<div class="info-holder info-rb" style="right:40px;">
											<div data-toggle="popover-all" data-content="Checkbox element using localStorage to remember the last status." data-original-title="Switch ON/OFF" data-container="body" data-placement="top" data-offset="0,-6"></div>
										</div>
									</li>
								{% endfor %}
								
							</ul>
							{% if smartHome.NumberOfEachDevice.NbLightInt > 1 %}
								<div class="card-body">
									<div class="lights-controls" data-controls="switch-lights-in">
										<button data-action="all-on" type="button" class="btn btn-success btn-rounded mr-2 lights-control">
											<strong>All ON</strong>
										</button>
										<button data-action="all-off" type="button" class="btn btn-danger btn-rounded lights-control">
											<strong>All OFF</strong>
										</button>
									</div>
								</div>
							{% endif %}
						</div>
						<!-- Interior lights  END -->
					</div>
					{% endif %}

					{% if smartHome.NumberOfEachDevice.NbLightExt > 0 %}
					<div class="col-sm-12 col-md-6 col-xl-4">
						<!-- Interior lights  START -->
						<div class="card" data-unit-group="switch-lights-ext">
							<div class="card-body">
								<h4 class="card-title">Luminaires - extérieur</h4>
							</div>
							<ul class="list-group list-group-flush">
								{% for lightExt in smartHome.devices.LightExt %}
									<li class="list-group-item d-flex" data-unit="switch-light-{{lightExt.moduleId}}">
										<svg class="icon-sprite">
											<use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
											<use xlink:href="/img/icons-sprite.svg#bulb-eco"/>
										</svg>
										<h5>{{lightExt.name}}</h5>
										<div class=""><canvas id="led-{{lightExt.moduleId}}" data-entry-led="switch-light-{{lightExt.moduleId}}" data-entry-ledid="led-{{lightExt.moduleId}}" width="30" height="30"></canvas></div>
										<label class="switch ml-auto">
											<input type="checkbox" id="switch-light-{{lightExt.moduleId}}">
										</label>
										<div class="info-holder info-rb" style="right:40px;">
											<div data-toggle="popover-all" data-content="Checkbox element using localStorage to remember the last status." data-original-title="Switch ON/OFF" data-container="body" data-placement="top" data-offset="0,-6"></div>
										</div>
									</li>
								{% endfor %}
								
							</ul>
							{% if smartHome.NumberOfEachDevice.NbLightExt > 1 %}
								<div class="card-body">
									<div class="lights-controls" data-controls="switch-lights-ext">
										<button data-action="all-on" type="button" class="btn btn-success btn-rounded mr-2 lights-control">
											<strong>All ON</strong>
										</button>
										<button data-action="all-off" type="button" class="btn btn-danger btn-rounded lights-control">
											<strong>All OFF</strong>
										</button>
									</div>
								</div>
							{% endif %}
						</div>
						<!-- Exterior lights  END -->
					</div>
					
					{% endif %}
					
                    {% set nbSocketDevice = smartHome.NumberOfEachDevice.NbWashMachine + smartHome.NumberOfEachDevice.NbFridge + smartHome.NumberOfEachDevice.NbClim + smartHome.NumberOfEachDevice.NbTv %}
					{% if  nbSocketDevice > 0 %}
					<div class="col-sm-12 col-md-6 col-xl-4">
						<!-- Appliances  START -->
						<div class="card" data-unit-group="switch-socket">
							<div class="card-body">
								<h4 class="card-title">Prises de courant</h4>
							</div>
							{# {{dump(smartHome.NumberOfEachDevice.NbClim)}} #}
                            {# <hr class="my-0"> #}
                            <ul class="list-group list-group-flush"  {#data-unit="air-conditioner"#}>
                                {% if smartHome.NumberOfEachDevice.NbClim > 0 %}
                                {% for clim in smartHome.devices.Clim %}
                                <!-- Air conditioner START -->
                                <li class="list-group-item d-flex pb-0" data-unit="switch-socket-{{clim.moduleId}}">
                                    <svg class="icon-sprite icon-1x">
                                        <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                        <use xlink:href="/img/icons-sprite.svg#appliances"/>
                                        {# <use xlink:href="/img/icons-sprite.svg#home-fridge"/> #}
                                    </svg>
                                    <h5>{{clim.name}}</h5>
                                    <div class=""><canvas id="led-{{clim.moduleId}}" data-entry-led="switch-socket-ac-{{clim.moduleId}}" data-entry-ledid="led-{{clim.moduleId}}" width="30" height="30"></canvas></div>
                                    {# <p class="ml-auto status">ON</p> #}
                                    <label class="switch ml-auto">
                                        <input type="checkbox" id="switch-socket-{{clim.moduleId}}">
                                    </label>
                                    <div class="info-holder info-rb" style="right:40px;">
                                        <div data-toggle="popover-all" data-content="Checkbox element using localStorage to remember the last status." data-original-title="Switch ON/OFF" data-container="body" data-placement="top" data-offset="0,-6"></div>
                                    </div>
                                </li>
                                {% endfor %}
                                <!-- Air conditioner  END -->
                                {% endif %}

                                {% if smartHome.NumberOfEachDevice.NbWashMachine > 0 %}
                                    <!-- Washing machine  START -->
                                    {% for washmachine in smartHome.devices.WashMachine %}
                                    <li class="list-group-item d-flex pb-0" data-unit="switch-socket-{{washmachine.moduleId}}">
                                        <svg class="icon-sprite icon-1x">
                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                            <use xlink:href="/img/icons-sprite.svg#wash-machine"/>
                                        </svg>
                                        <h5>{{washmachine.name}}</h5>
                                        <div class=""><canvas id="led-{{washmachine.moduleId}}" data-entry-led="switch-socket-{{washmachine.moduleId}}" data-entry-ledid="led-{{washmachine.moduleId}}" width="30" height="30"></canvas></div>
                                        {# <p class="ml-auto status">ON</p> #}
                                        <label class="switch ml-auto">
                                            <input type="checkbox" id="switch-socket-{{washmachine.moduleId}}">
                                        </label>
                                    </li>
                                    {% endfor %}
                                    <!-- Washing machine  END -->
                                {% endif %}

                                {% if smartHome.NumberOfEachDevice.NbFridge > 0 %}
                                    <!-- Fridge  START -->
                                    {% for fridge in smartHome.devices.Fridge %}
                                    <li class="list-group-item d-flex pb-0" data-unit="switch-socket-{{fridge.moduleId}}">
                                        <svg class="icon-sprite icon-1x">
                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                            <use xlink:href="/img/icons-sprite.svg#home-fridge"/>
                                        </svg>
                                        <h5>{{fridge.name}}</h5>
                                        <div class=""><canvas id="led-{{fridge.moduleId}}" data-entry-led="switch-socket-{{fridge.moduleId}}" data-entry-ledid="led-{{fridge.moduleId}}" width="30" height="30"></canvas></div>
                                        {# <p class="ml-auto status">ON</p> #}
                                        <label class="switch ml-auto">
                                            <input type="checkbox" id="switch-socket-{{fridge.moduleId}}">
                                        </label>
                                    </li>
                                    {% endfor %}
                                {% endif %}
                                <!-- Fridge  END -->

                                {% if smartHome.NumberOfEachDevice.NbTv > 0 %}
                                    <!-- TV  START -->
                                    {% for tv in smartHome.devices.Tv %}
                                    <li class="list-group-item d-flex" data-unit="switch-socket-{{tv.moduleId}}">
                                        <svg class="icon-sprite icon-1x">
                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                            <use xlink:href="/img/icons-sprite.svg#tv-lcd"/>
                                        </svg>
                                        <h5>{{tv.name}}</h5>
                                        <div class=""><canvas id="led-{{tv.moduleId}}" data-entry-led="switch-socket-{{tv.moduleId}}" data-entry-ledid="led-{{tv.moduleId}}" width="30" height="30"></canvas></div>
                                        <label class="switch ml-auto">
                                            <input type="checkbox" id="switch-socket-{{tv.moduleId}}">
                                        </label>
                                        {# <h5>TV</h5>
                                        <p class="ml-auto status">OFF</p> #}
                                    </li>
                                    {% endfor %}
                                    <!-- TV  END -->
                                {% endif %}
                                {# <li class="list-group-item d-flex pt-0 pb-4">
                                    <p class="entry">Remaining time</p>
                                    <p id="wash-machine" class="ml-auto mb-0"></p>
                                </li> #}
                            </ul>
                            {% if nbSocketDevice > 1 %}
                                <div class="card-body">
                                    <div class="lights-controls" data-controls="switch-socket">
                                        <button data-action="all-on" type="button" class="btn btn-success btn-rounded mr-2 lights-control">
                                            <strong>All ON</strong>
                                        </button>
                                        <button data-action="all-off" type="button" class="btn btn-danger btn-rounded lights-control">
                                            <strong>All OFF</strong>
                                        </button>
                                    </div>
                                </div>
                            {% endif %}
							
						</div>
						<!-- Appliances  END -->
					</div>
					{% endif %}

				</div>
			</div>
			<div class="tab-pane fade " id="programming" role="tabpanel" aria-labelledby="programming-tab">
				<div class="row layout-top-spacing">
                    <div class="col-xl-12 col-lg-12 col-md-12">

                        <div class="mail-box-container">
                            <div class="mail-overlay"></div>

                            <div class="tab-title">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-12 text-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                                        {# <i class="fa fa-clock" aria-hidden="true"></i> #}
                                        <h5 class="app-title">Horaire</h5>
                                    </div>

                                    <div class="todoList-sidebar-scroll">
                                        <div class="col-md-12 col-sm-12 col-12 mt-4 pl-0">
                                            <ul class="nav nav-pills d-block" id="pills-tab" role="tablist">
                                                {% set active = 1 %}{# variable de gestion du nav-item à afficher par défaut par la classe 'active' #}
                                                {# item des light interior #}
                                                {% if smartHome.NumberOfEachDevice.NbLightInt > 0 %}		 
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="light-in" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        <svg class="icon-sprite">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#bulb-eco"/>
                                                        </svg>
                                                        ECL Intérieur <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbLightInt}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}
                                                
                                                {# item des light exterior #}
                                                {% if smartHome.NumberOfEachDevice.NbLightExt > 0 %}	
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="light-ext" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg>  #}
                                                        <svg class="icon-sprite">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#bulb-eco"/>
                                                        </svg>
                                                        ECL Extérieur <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbLightExt}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}

                                                {# item des clim #}
                                                {% if smartHome.NumberOfEachDevice.NbClim > 0 %}	
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="socket-ac" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        <svg class="icon-sprite icon-1x">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#appliances"/>
                                                            {# <use xlink:href="/img/icons-sprite.svg#home-fridge"/> #}
                                                        </svg>
                                                        Climatiseur <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbClim}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}

                                                {# item des machines à laver #}
                                                {% if smartHome.NumberOfEachDevice.NbWashMachine > 0 %}
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="socket-washmachine" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        <svg class="icon-sprite icon-1x">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#wash-machine"/>
                                                        </svg>
                                                        Machine à Laver <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbWashMachine}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}

                                                {# item des frigo #}
                                                {% if smartHome.NumberOfEachDevice.NbFridge > 0 %}	
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="socket-fridge" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        <svg class="icon-sprite icon-1x">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#home-fridge"/>
                                                        </svg>
                                                        Frigo <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbFridge}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}

                                                {# item des tv #}
                                                {% if smartHome.NumberOfEachDevice.NbTv > 0 %}
                                                    <li class="nav-item">
                                                        <a class="nav-link list-actions {% if active == 1 %}active{% endif %}" id="socket-tv" data-toggle="pill" href="#pills-inbox" role="tab" aria-selected="true">
                                                        <svg class="icon-sprite icon-1x">
                                                            <use class="glow" fill="url(#radial-glow)" xlink:href="/img/icons-sprite.svg#glow"/>
                                                            <use xlink:href="/img/icons-sprite.svg#tv-lcd"/>
                                                        </svg>
                                                        TV <span class="todo-badge badge">{{smartHome.NumberOfEachDevice.NbTv}}</span></a>
                                                    </li>
                                                    {% set active = active - 1 %}
                                                {% endif %}
                                            </ul>
                                        </div>
                                    </div>
                                    <a class="btn" id="addTask" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg><small> Scénario</small></a>
                                    {# <a class="btn" id="add-scenario" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Scénario</a> #}
                                </div>
                            </div>

                            <div id="todo-inbox" class="accordion todo-inbox">
                                <div class="search">
                                    {# Select ou input des light interior #}
                                    {% if smartHome.NumberOfEachDevice.NbLightInt > 0 %}
                                        <select class="selectpicker form-control input-search light-in" id='light-in-id' data-live-search="true">
                                            {% for lightInt in smartHome.devices.LightInt %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{lightInt.slug}}" data-name="{{lightInt.name}}" data-device="{{lightInt.slug}}" data-address="{{'switch-light-' ~ lightInt.moduleId}}">{{lightInt.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbLightInt == 1 %}
                                        <input type="text" value="{{lightInt.slug}}" class="form-control" placeholder="{{smartHome.devices.LightInt[0].name}}" disabled>
                                    {% endif %}

                                    {# Select ou input des light exterior #}
                                    {% if smartHome.NumberOfEachDevice.NbLightExt > 0 %}
                                        <select class="selectpicker form-control input-search light-ext" id='light-ext-id' data-live-search="true" title="Choisir un équipement">
                                            {% for lightExt in smartHome.devices.LightExt %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{lightExt.slug}}" data-name="{{lightExt.name}}" data-device="{{lightExt.slug}}" data-address="{{'switch-light-' ~ lightExt.moduleId}}">{{lightExt.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbLightExt == 1 %}
                                        <input type="text" value="{{lightExt.slug}}" class="form-control" placeholder="{{smartHome.devices.LightExt[0].name}}" disabled>
                                    {% endif %}

                                    {# Select ou input des Climatiseur #}
                                    {% if smartHome.NumberOfEachDevice.NbClim > 0 %}
                                        <select class="selectpicker form-control input-search socket-ac" id='socket-ac-id' data-live-search="true" title="Choisir un équipement">
                                            {% for clim in smartHome.devices.Clim %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{clim.slug}}" data-name="{{clim.name}}" data-device="{{clim.slug}}" data-address="{{'switch-socket-' ~ clim.moduleId}}">{{clim.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbClim == 1 %}
                                        <input type="text" value="{{clim.slug}}" class="form-control" placeholder="{{smartHome.devices.Clim[0].name}}" disabled>
                                    {% endif %}

                                    {# Select ou input des Machine à laver #}
                                    {% if smartHome.NumberOfEachDevice.NbWashMachine > 0 %}
                                        <select class="selectpicker form-control input-search socket-washmachine" data-live-search="true" title="Choisir un équipement">
                                            {% for washmachine in smartHome.devices.WashMachine %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{washmachine.slug}}" data-name="{{washmachine.name}}" data-device="{{washmachine.slug}}" data-address="{{'switch-socket-' ~ washmachine.moduleId}}">{{washmachine.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbWashMachine == 1 %}
                                        <input type="text" value="{{washmachine.slug}}" class="form-control" placeholder="{{smartHome.devices.Washmachine[0].name}}" disabled>
                                    {% endif %}

                                    {# Select ou input des Frigo #}
                                    {% if smartHome.NumberOfEachDevice.NbFridge > 0 %}
                                        <select class="selectpicker form-control input-search socket-fridge" data-live-search="true" title="Choisir un équipement">
                                            {% for fridge in smartHome.devices.Fridge %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{fridge.slug}}" data-name="{{fridge.name}}" data-device="{{fridge.slug}}" data-address="{{'switch-socket-' ~ fridge.moduleId}}">{{fridge.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbFridge == 1 %}
                                        <input type="text" value="{{fridge.slug}}" class="form-control" placeholder="{{smartHome.devices.Fridge[0].name}}" disabled>
                                    {% endif %}

                                    {# Select ou input des Tv #}
                                    {% if smartHome.NumberOfEachDevice.NbTv > 0 %}
                                        <select class="selectpicker form-control input-search socket-tv" data-live-search="true" title="Choisir un équipement">
                                            {% for tv in smartHome.devices.Tv %}
                                                <option {% if loop.index0 == 0 %}selected{% endif %} value="{{tv.slug}}" data-name="{{tv.name}}" data-device="{{tv.slug}}" data-address="{{'switch-socket-' ~ tv.moduleId}}">{{tv.name}}</option>
                                            {% endfor %}
                                        </select>
                                    {% elseif smartHome.NumberOfEachDevice.NbTv == 1 %}
                                        <input type="text" value="{{tv.slug}}" class="form-control" placeholder="{{smartHome.devices.Tv[0].name}}" disabled>
                                    {% endif %}
                                    {# <input type="text" class="form-control input-search" placeholder="Search Here..."> #}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu mail-menu d-lg-none"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                </div>
                        
                                <div class="todo-box">
                                    
                                    <div id="ct" class="todo-box-scroll">
                                        {# Tableau des jours de la semaine #}
                                        {% set dayTab = ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'] %}
                                        <script>
                                            var tab = {};
                                        </script> 
                                        {# Test s'il existe au moins un Device de Type 'Light Interior' #}
                                        {% if smartHome.NumberOfEachDevice.NbLightInt > 0 %}
                                            {# Boucle de parcours des Devices de type 'Light Interior' #}
                                            {% for lightInt in smartHome.devices.LightInt %}
                                                {# {{dump(lightInt.programming)}} #}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if lightInt.programming|length > 0 %}
                                                    <script>
                                                        tab['{{lightInt.slug}}'] = {{ lightInt.programming | json_encode | raw }}
                                                        {# console.log(tab) #}
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in lightInt.programming['sc'] %}
                                                    {# {{dump(scenario)}} #}
                                                    <div class="todo-item light-in {{lightInt.slug}}" data-name="{{lightInt.name}}" data-device="{{lightInt.slug}}" data-address="{{'switch-light-' ~ lightInt.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            {# <div class="n-chk text-center">
                                                                <label class="new-control new-checkbox checkbox-primary">
                                                                <input type="checkbox" class="new-control-input inbox-chkbox">
                                                                <span class="new-control-indicator"></span>
                                                                </label>
                                                            </div> #}

                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{lightInt.name}}</span></small> </h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF : {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{lightInt.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{lightInt.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{lightInt.name}}" data-device="{{lightInt.slug}}" data-address="{{'switch-light-' ~ lightInt.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        {# <a class="important dropdown-item" href="javascript:void(0);">Important</a> #}
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{lightInt.name}}" data-device="{{lightInt.slug}}" data-address="{{'switch-light-' ~ lightInt.moduleId}}"  data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                        {# <a class="dropdown-item permanent-delete" href="javascript:void(0);">Permanent Delete</a>
                                                                        <a class="dropdown-item revive" href="javascript:void(0);">Revive Task</a> #}
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                        {# Test s'il existe au moins un Device de Type 'Light Exterior' #}
                                        {% if smartHome.NumberOfEachDevice.NbLightExt > 0 %}
                                            {# Boucle de parcours des Devices de type 'Light Exterior' #}
                                            {% for lightExt in smartHome.devices.LightExt %}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if lightExt.programming|length > 0 %}
                                                    <script>
                                                        tab['{{lightExt.slug}}'] = {{ lightExt.programming | json_encode | raw }}
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in lightExt.programming['sc'] %}
                                                    <div class="todo-item light-ext {{lightExt.slug}}" data-name="{{lightExt.name}}" data-device="{{lightExt.slug}}" data-address="{{'switch-light-' ~ lightExt.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{lightExt.name}}</span></small></h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF: {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{lightExt.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{lightExt.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{lightExt.name}}" data-device="{{lightExt.slug}}" data-address="{{'switch-light-' ~ lightExt.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{lightExt.name}}" data-device="{{lightExt.slug}}" data-address="{{'switch-light-' ~ lightExt.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                        {# Test s'il existe au moins un Device de Type 'Clim' #}
                                        {% if smartHome.NumberOfEachDevice.NbClim > 0 %}
                                            {# Boucle de parcours des Devices de type 'Clim' #}
                                            {% for clim in smartHome.devices.Clim %}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if clim.programming|length > 0 %}
                                                    <script>
                                                        tab['{{clim.slug}}'] = {{ clim.programming | json_encode | raw }}
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in clim.programming['sc'] %}
                                                    <div class="todo-item socket-ac {{clim.slug}}" data-name="{{clim.name}}" data-device="{{clim.slug}}" data-address="{{'switch-socket-' ~ clim.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{clim.name}}</span></small></h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF: {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{clim.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{clim.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{clim.name}}" data-device="{{clim.slug}}" data-address="{{'switch-socket-' ~ clim.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{clim.name}}" data-device="{{clim.slug}}" data-address="{{'switch-socket-' ~ clim.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                        {# Test s'il existe au moins un Device de Type 'WashMachine' #}
                                        {% if smartHome.NumberOfEachDevice.NbWashMachine > 0 %}
                                            {# Boucle de parcours des Devices de type 'WashMachine' #}
                                            {% for washmachine in smartHome.devices.WashMachine %}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if washmachine.programming|length > 0 %}
                                                    <script>
                                                        tab['{{washmachine.slug}}'] = {{ washmachine.programming | json_encode | raw }}
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in washmachine.programming['sc'] %}
                                                    <div class="todo-item socket-washmachine {{washmachine.slug}}" data-name="{{washmachine.name}}" data-device="{{washmachine.slug}}" data-address="{{'switch-socket-' ~ washmachine.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{washmachine.name}}</span></small></h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF: {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{washmachine.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{washmachine.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{washmachine.name}}" data-device="{{washmachine.slug}}" data-address="{{'switch-socket-' ~ washmachine.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{washmachine.name}}" data-device="{{washmachine.slug}}" data-address="{{'switch-socket-' ~ washmachine.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                        {# Test s'il existe au moins un Device de Type 'Fridge' #}
                                        {% if smartHome.NumberOfEachDevice.NbFridge > 0 %}
                                            {# Boucle de parcours des Devices de type 'Fridge' #}
                                            {% for fridge in smartHome.devices.Fridge %}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if fridge.programming|length > 0 %}
                                                    <script>
                                                        tab['{{fridge.slug}}'] = {{ fridge.programming | json_encode | raw }}
                                                       
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in fridge.programming['sc'] %}
                                                    <div class="todo-item socket-fridge {{fridge.slug}}" data-name="{{fridge.name}}" data-device="{{fridge.slug}}" data-address="{{'switch-socket-' ~ fridge.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            
                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{fridge.name}}</span></small></h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF: {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{fridge.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{fridge.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{fridge.name}}" data-device="{{fridge.slug}}" data-address="{{'switch-socket-' ~ fridge.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{fridge.name}}" data-device="{{fridge.slug}}" data-address="{{'switch-socket-' ~ fridge.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                        {# Test s'il existe au moins un Device de Type 'Tv' #}
                                        {% if smartHome.NumberOfEachDevice.NbTv > 0 %}
                                            {# Boucle de parcours des Devices de type 'Tv' #}
                                            {% for tv in smartHome.devices.Tv %}
                                                {# Test si le tableau des programmes du device contient au moins un scénario #}
                                                {% if tv.programming|length > 0 %}
                                                    <script>
                                                        tab['{{tv.slug}}'] = {{ tv.programming | json_encode | raw }}
                                                       
                                                    </script> 
                                                    {# Boucle de parcours des scénari du device #}
                                                    {% for scenario in tv.programming['sc'] %}
                                                    <div class="todo-item socket-tv {{tv.slug}}" data-name="{{tv.name}}" data-device="{{tv.slug}}" data-address="{{'switch-socket-' ~ tv.moduleId}}">
                                                        <div class="todo-item-inner">
                                                            
                                                            <div class="todo-content">
                                                                <h5 class="todo-heading" data-todoHeading="{{scenario['name']}}">{{scenario['name']}} <small><span class="badge badge-dark">#{{tv.name}}</span></small></h5>
                                                                <p class="meta-date startAt-endAt">Début : {{scenario['stAt'][0]}}:{{ scenario['stAt'][1] > 0 ? scenario['stAt'][1] : '0' ~ scenario['stAt'][1] }}, Fin : {{scenario['enAt'][0]}}:{{ scenario['enAt'][1] > 0 ? scenario['enAt'][1] : '0' ~ scenario['enAt'][1] }}</p>
                                                                <p class="meta-date demarrage-auto">Démarrage Auto : {{ scenario['auto'] == 1 ? '<span class="badge badge-success">Oui</span>' : '<span class="badge badge-danger">Non</span>' }}</p>
                                                                <p class="meta-date reallumage-auto">Réallumage Auto : {{ scenario['autoc'] == 1 ? '<span class="badge badge-success mt-1">Oui</span>' : '<span class="badge badge-danger mt-1">Non</span>' }}</p>
                                                                <p class="meta-date time-on-off">Durée ON : {{scenario['ton'] ?? 0 ~ ' min'}}, Durée OFF: {{scenario['toff'] ?? 0 ~ ' min'}}</p>
                                                                <p class="todo-text" data-todoHtml="<p>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>" data-todoText='{"ops":[{"insert":"Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {%endif %}{% endif %}{% endfor %}\n"}]}'>Jours : {% for i in range(0, 6) %}{% if scenario['day'][i] %}{{dayTab[i]}}{% if i < 6 %}, {% endif %}{% endif %}{% endfor %}</p>
                                                            </div>

                                                            <div class="action-dropdown custom-dropdown-icon">
                                                                <div class="dropdown">
                                                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{tv.slug}}-{{loop.index0}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                    </a>

                                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink-{{tv.slug}}-{{loop.index0}}">
                                                                        <a class="edit dropdown-item" href="javascript:void(0);" data-name="{{tv.name}}" data-device="{{tv.slug}}" data-address="{{'switch-socket-' ~ tv.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                                                            Modifier
                                                                        </a>
                                                                        <a class="dropdown-item delete" href="javascript:void(0);" data-name="{{tv.name}}" data-device="{{tv.slug}}" data-address="{{'switch-socket-' ~ tv.moduleId}}" data-sc={{loop.index0}}>
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                            Supprimer
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}

                                    </div>

                                    <div class="modal fade" id="todoShowListItem" tabindex="-1" role="dialog" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-body">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="modal"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                                    <div class="compose-box">
                                                        <div class="compose-content">
                                                            <h5 class="task-heading"></h5>
                                                            <p class="task-text"></p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button class="btn" data-dismiss="modal"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg> Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>                                    
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="addScenarioModal" tabindex="-1" role="dialog" aria-labelledby="addScenarioModalTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x close" data-dismiss="modal"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                        <div class="compose-box">
                                            <div class="compose-content" id="addScenarioModalTitle">
                                                <h5 class=""></h5>
                                                <form>
                                                    {# Input du Nom du scénario #}
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> #}
                                                                <div class="w-100">
                                                                    <input id="scenario-name" type="text" placeholder="Entrer le nom du Scénario" class="form-control" name="scenario-name" required>
                                                                    <small id="sh-text1" class="form-text text-muted">Nom du Scénario</small>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        {# Input du Start_Time #}
                                                        <div class="col">
                                                            <div class="d-flex  mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> #}
                                                                <div class="w-100">
                                                                    {# <label for="time_startAt" class="sr-only">Heure de Début</label> #}
                                                                    <input id="time_startAt" type="time" placeholder="" class="form-control" name="time_startAt" required>
                                                                    <small id="" class="form-text text-muted">Heure de début du Scénario</small>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        {# Input du End_Time #}
                                                        <div class="col align-content-center">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> #}
                                                                <div class="w-100">
                                                                    {# <label for="time_endAt" class="sr-only">Heure de Début</label> #}
                                                                    <input id="time_endAt" type="time" placeholder="" class="form-control" name="time_endAt" required>
                                                                    <small id="" class="form-text text-muted">Heure de fin du Scénario</small>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {# Checkbox du Auto-ON #}
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> #}
                                                                <div class="w-100">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input type="checkbox" class="custom-control-input" id="auto_on_check">
                                                                        <label class="custom-control-label" for="auto_on_check"><small id="" class="form-text text-muted">Démarrage automatique si coché</small></label>
                                                                    </div>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        {# Input du Time_ON #}
                                                        <div class="col">
                                                            <div class="d-flex  mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> #}
                                                                <div class="w-100">
                                                                    {# <label for="timeON" class="sr-only">Heure de Début</label> #}
                                                                    <input id="timeON" type="number" min="0" max="1440" step="1" placeholder="" class="form-control" name="timeON" required>
                                                                    <small id="" class="form-text text-muted">Durée d'allumage(en mins)</small>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        {# Input du Time_OFF #}
                                                        <div class="col align-content-center">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> #}
                                                                <div class="w-100">
                                                                    {# <label for="timeOFF" class="sr-only">Heure de Début</label> #}
                                                                    <input id="timeOFF" type="number" min="0" max="1440" step="1" placeholder="" class="form-control" name="timeOFF" required>
                                                                    <small id="" class="form-text text-muted">Durée d'arrêt(en mins)</small>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {# Checkbox du Réallumage Auto-ON #}
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> #}
                                                                <div class="w-100">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input type="checkbox" class="custom-control-input" id="cycle-auto_on_check">
                                                                        <label class="custom-control-label" for="cycle-auto_on_check"><small id="" class="form-text text-muted">Réallumage automatique si coché</small></label>
                                                                    </div>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {# Tableau de checkbox de sélection des jours #}
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> #}
                                                                <div class="w-100">
                                                                    {# <div class="custom-control custom-checkbox">
                                                                        <input type="checkbox" class="custom-control-input" id="auto_on_check">
                                                                        <label class="custom-control-label" for="auto_on_check"><small id="" class="form-text text-muted">Démarrage automatique si coché</small></label>
                                                                    </div> #}
                                                                    <small id="" class="form-text text-muted">Cochez les jours d'application du scénario</small>
                                                                    <div class="table-responsive">
                                                                        <table class="table table-hover table-bordered" id="table_progpanel">
                                                                            <thead class="thead-dark">
                                                                                <tr>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Lundi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Mardi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Mercredi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Jeudi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Vendredi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Samedi</div>
                                                                                    </th>
                                                                                    <th>
                                                                                        <div class="form-inline justify-content-center">Dimanche</div>
                                                                                    </th>
                                                                                </tr>
												                            </thead>
                                                                            <tbody>
													                            <tr>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check1" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check1"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check2" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check2"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check3" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check3"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check4" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check4"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check5" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check5"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check6" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check6"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                    <td class="align-middle">
                                                                                        <form class="form-inline justify-content-center">
                                                                                            <div class="form-check mb-2 mr-sm-2">

                                                                                                <div class="custom-control custom-checkbox"
                                                                                                    align="center">
                                                                                                    <input type="checkbox"
                                                                                                        class="custom-control-input"
                                                                                                        id="apply_day_check0" checked="checked">
                                                                                                    <label class="custom-control-label"
                                                                                                        for="apply_day_check0"></label>
                                                                                                </div>


                                                                                            </div>
                                                                                        </form>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {# Radio Button Appliquer à ? #}
                                                    <div class="row addTask-only">
                                                        <div class="col-md-12">
                                                            <div class="d-flex mail-to mb-4">
                                                                {# <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3 flaticon-notes"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> #}
                                                                <div class="w-100">
                                                                    <div class="custom-control custom-radio custom-control-inline">
                                                                        <input type="radio" checked="checked" id="apply-only-on-device" name="apply-for" value="apply-only-on-device" class="custom-control-input">
                                                                        <label class="custom-control-label" for="apply-only-on-device"><small id="" class="form-text text-muted">Appliquer uniquement à l'équipement</small></label>
                                                                    </div>
                                                                    <div class="custom-control custom-radio custom-control-inline">
                                                                        <input type="radio" id="apply-for-all-same-type" name="apply-for" value="apply-for-all-same-type" class="custom-control-input">
                                                                        <label class="custom-control-label" for="apply-for-all-same-type"><small id="" class="form-text text-muted">Appliquer à tous les équipements du même type</small></label>
                                                                    </div>
                                                                    <div class="custom-control custom-radio custom-control-inline">
                                                                        <input type="radio" id="apply-for-all" name="apply-for" value="apply-for-all" class="custom-control-input">
                                                                        <label class="custom-control-label" for="apply-for-all"><small id="" class="form-text text-muted">Appliquer à tous les équipements</small></label>
                                                                    </div>
                                                                    <span class="validation-text"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <input type="hidden" data-name="" data-device="" data-sc="" data-address="" class="form-control" name="device-modal" id="device-modal" aria-describedby="helpId" placeholder="">
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-outline-danger" data-dismiss="modal"><i class="flaticon-cancel-12"></i> Fermer</button>
                                        <button class="btn btn-outline-primary addTask">Enregistrer</button>
                                        <button class="btn btn-outline-primary edit-scenario">Modifier</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
			</div>

		</div>
    </div>
	
{% endblock %}

{% block javascripts %}
	<script src="/js/ie11fix/fn.fix-padStart.js"></script>
    <script src="/plugins/editors/quill/quill.js"></script>
    <script src="/js/devices-programmation.js"></script>
	<script src="/plugins/bootstrap-select/bootstrap-select.min.js"></script>
	<script src="/plugins/sweetalerts/sweetalert2.min.js"></script>
	<script src="/plugins/sweetalerts/custom-sweetalert.js"></script>

	<!-- Cross browser support for SVG icon sprites -->
	<script src="/js/svg4everybody.min.js"></script>
	<script src="/js/iot-functions.js"></script>
	{# <script src="/js/iot-functions-src.js"></script> #}
	<script src="/js/mqttws31.js" type="text/javascript"></script>

	<script src="/js/smartHome.js"></script>
    <script>
        device_prog_url_prefix = "{{path('smart_device_prog')}}"
        console.log(device_prog_url_prefix);
        
        {# Variable qui contient la valeur (Device name) de l'option selecté dans le menu select actuellement visible #}
        select_device_name = "";

        {# Variable qui contient la valeur (Device type: light-in) de l'option selecté dans le menu select actuellement visible #}
        select_device_type = "";
        
        {# Variable qui contient la valeur (Device slug) de l'option selecté dans le menu select actuellement visible #}
        select_device_slug = "";

        {# Variable qui contient l'address du device(pour wsConv) de l'option selecté dans le menu select actuellement visible #}
        select_address = "";
        
        {# Mise à jour de l'affichage des scénarii en fonction du Device selectionné #}
        $('select').on('change', function() {
            {# console.log( this );
            console.log( $(this).val() ); #}
            select_device_slug = $(this).val();
            select_address = $(this).find(':selected').data('address');
            select_device_name = $(this).find(':selected').data('name');
            {# console.log(select_address) #}
            var $el = $('.' + this.value).fadeIn();
            {# console.log($el) #}
            $("#ct > div").not($el).hide();

            //On affiche le bouton Ajouter un Scénario si celui-ci est masqué
            if($('#addTask').hasClass('d-none')) $('#addTask').removeClass('d-none')
        });

        var firstTabProgrammation = true;
        //console.log( parseFloat( String( $('#budget').html() ).replace(' ', '') ) )
        $('.nav-tabs a').on('shown.bs.tab', function(event){
            var tab = $(event.target).text();         // active tab
            var prevTab = $(event.relatedTarget).text();  // previous tab
            {# console.log(tab)
            console.log(prevTab) #}
            if( String(tab).indexOf('Programmation') >= 0){
                if(firstTabProgrammation){
                    firstTabProgrammation = false; 
                    //for(let i = 0; i < 5; i++){
                        {# Affichage du select correspond à la nav-item active par défaut #}
                        $('.list-actions').each(function(){//On parcours tous les nav-items à la recherche de celui qui possède la classe active
                            if($('#' + this.id).hasClass('active')){
                                var id = '#' + this.id + '-id';
                                $(".list-actions#" + this.id).trigger('click');
                                
                                
                            }
                        }) 

                    //}
                }
                //alert("Active tab " + x);
            }
        });
    </script> 

	{# <script>
		// Switch (checkbox element) toogler
		$('.switch input[type="checkbox"]').on("change", function (t) {

			// Check the time between changes to prevert Android native browser execute twice
			// If you dont need support for Android native browser - just call "switchSingle" function
			if (this.last) {

				this.diff = t.timeStamp - this.last;

				// Don't execute if the time between changes is too short (less than 250ms) - Android native browser "twice bug"
				// The real time between two human taps/clicks is usually much more than 250ms"
				if (this.diff > 250) {

					this.last = t.timeStamp;

					iot.switchSingle(this.id, this.checked);

				} else {
					return false;
				}

			} else { // First attempt on this switch element
				this.last = t.timeStamp;

				iot.switchSingle(this.id, this.checked);

			}
		});

		// All ON/OFF controls
		$('.lights-control').click(function () {

			var target = $(this).closest('.lights-controls').data('controls');
			var action = $(this).data('action');

			iot.switchGroup(target, action);
		});
	</script> #}
{% endblock %}
